<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="kafi.Views.InventoryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:kafi.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:kafi.ViewModels"
    xmlns:wctprimitives="using:CommunityToolkit.WinUI.UI.Controls.Primitives"
    mc:Ignorable="d">
    <Page.DataContext>
        <vm:InventoryViewModel />
    </Page.DataContext>
    <Page.Resources>
        <!--  Storyboard để hiển thị bảng (sheet)  -->
        <Storyboard x:Name="ShowSheetStoryboard">
            <DoubleAnimation
                Storyboard.TargetName="SheetTranslateTransform"
                Storyboard.TargetProperty="X"
                From="700"
                To="0"
                Duration="0:0:0.3" />
        </Storyboard>
        <!--  Storyboard để ẩn bảng (sheet)  -->
        <Storyboard x:Name="HideSheetStoryboard">
            <DoubleAnimation
                Storyboard.TargetName="SheetTranslateTransform"
                Storyboard.TargetProperty="X"
                From="0"
                To="700"
                Duration="0:0:0.3" />
        </Storyboard>
        <!--  Storyboard để hiển thị overlay  -->
        <Storyboard x:Key="ShowOverlayStoryboard">
            <DoubleAnimation
                Storyboard.TargetName="Overlay"
                Storyboard.TargetProperty="Opacity"
                From="0"
                To="0.5"
                Duration="0:0:0.3" />
        </Storyboard>
        <!--  Storyboard để ẩn overlay  -->
        <Storyboard x:Key="HideOverlayStoryboard">
            <DoubleAnimation
                Storyboard.TargetName="Overlay"
                Storyboard.TargetProperty="Opacity"
                From="0.5"
                To="0"
                Duration="0:0:0.3" />
        </Storyboard>
        <SolidColorBrush x:Key="TextControlBackgroundPointerOver" Color="Transparent" />
        <SolidColorBrush x:Key="TextControlBackgroundFocused" Color="Transparent" />
        <SolidColorBrush x:Key="TextControlBorderBrushFocused" Color="Transparent" />
        <SolidColorBrush x:Key="CalendarDatePickerBackgroundPointerOver" Color="Transparent" />
        <SolidColorBrush x:Key="CalendarDatePickerBackgroundPressed" Color="Transparent" />
    </Page.Resources>
    <Grid Padding="0,0,10,0" RowSpacing="40">
        <Grid.RowDefinitions>
            <RowDefinition Height="1*" />
            <RowDefinition Height="20*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Row="0" Grid.ColumnSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock
                Grid.Column="0"
                FontSize="30"
                FontWeight="Bold"
                Text="Kho" />
            <Button
                x:Name="AddInventoryButton"
                Grid.Column="1"
                Padding="40,10,40,10"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Background="{StaticResource SecondaryBrush}"
                Click="AddInventoryButton_Click"
                CornerRadius="20"
                Foreground="White"
                PointerEntered="AddInventoryButton_PointerEntered"
                PointerExited="AddInventoryButton_PointerExited">
                <StackPanel
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="30">
                    <TextBlock
                        x:Name="AddInventoryButtonText"
                        Foreground="White"
                        Text="Thêm kho mới" />
                    <FontIcon Glyph="&#xECC8;" />
                </StackPanel>
            </Button>
        </Grid>
        <StackPanel
            Grid.Row="1"
            Grid.ColumnSpan="2"
            Padding="40"
            Background="White"
            CornerRadius="10"
            Spacing="40">
            <controls:DataGrid
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                AutoGenerateColumns="False"
                Background="White"
                CanUserReorderColumns="True"
                CanUserResizeColumns="True"
                ColumnWidth="*"
                Foreground="#71747D"
                GridLinesVisibility="Horizontal"
                HorizontalScrollBarVisibility="Hidden"
                ItemsSource="{Binding Inventories}"
                RowHeight="50">
                <controls:DataGrid.ColumnHeaderStyle>
                    <Style TargetType="wctprimitives:DataGridColumnHeader">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="wctprimitives:DataGridColumnHeader">
                                    <ContentPresenter
                                        Padding="10"
                                        Background="White"
                                        FontSize="16"
                                        Foreground="Black" />
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </controls:DataGrid.ColumnHeaderStyle>
                <controls:DataGrid.Columns>
                    <controls:DataGridTextColumn Binding="{Binding Id}" Header="ID" />
                    <controls:DataGridTextColumn Binding="{Binding QuantityInStock}" Header="Tồn kho" />
                    <controls:DataGridTextColumn Binding="{Binding ReorderLevel}" Header="Ngưỡng" />
                    <controls:DataGridTextColumn Binding="{Binding LastUpdated}" Header="Cập nhật lần cuối" />
                    <controls:DataGridTextColumn Binding="{Binding ExpireDate}" Header="Hạn sử dụng" />
                    <controls:DataGridTextColumn Binding="{Binding Unit}" Header="Đơn vị" />
                    <controls:DataGridTextColumn Binding="{Binding UnitPrice}" Header="Giá" />
                </controls:DataGrid.Columns>
            </controls:DataGrid>
            <StackPanel
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Orientation="Horizontal"
                Spacing="50">
                <StackPanel.Resources>
                    <Style TargetType="Button">
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Background" Value="#DBDBDB" />
                        <Setter Property="CornerRadius" Value="10" />
                        <Setter Property="Height" Value="30" />
                        <Setter Property="Width" Value="100" />
                    </Style>
                </StackPanel.Resources>
                <Button x:Name="PreviousButton">
                    Trang trước
                </Button>
                <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                    <TextBlock x:Name="CurrentDataPage" Text="1" />
                    <TextBlock x:Name="TotalDataPage" Text="/5" />
                </StackPanel>
                <Button x:Name="NextButton">
                    Trang sau
                </Button>
            </StackPanel>
        </StackPanel>
        <Border
            x:Name="Overlay"
            Grid.RowSpan="2"
            Margin="-1000"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Background="Black"
            Canvas.ZIndex="1"
            Tapped="Overlay_Tapped"
            Visibility="Collapsed" />
        <!--  Bảng (sheet) xuất hiện từ bên phải  -->
        <Grid
            x:Name="SheetPanel"
            Grid.RowSpan="2"
            Grid.Column="1"
            Padding="30"
            Background="White"
            Canvas.ZIndex="2"
            CornerRadius="20"
            RenderTransformOrigin="0.0,0.5">
            <Grid.RenderTransform>
                <TranslateTransform x:Name="SheetTranslateTransform" X="700" />
            </Grid.RenderTransform>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="10*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0" VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    FontSize="24"
                    Text="Thêm kho mới"
                    TextAlignment="Center" />
                <!--  Các nội dung khác trong bảng  -->
                <Button
                    x:Name="CloseSheetButton"
                    Width="30"
                    Height="30"
                    Padding="0"
                    HorizontalAlignment="Right"
                    Background="{StaticResource PrimaryBrush}"
                    Click="CloseSheetButton_Click"
                    CornerRadius="100">
                    <FontIcon FontSize="12" Glyph="&#xE970;" />
                </Button>
            </Grid>
            <Border
                Grid.Row="1"
                Height="1"
                HorizontalAlignment="Stretch"
                Background="Black" />
            <Grid
                Grid.Row="2"
                ColumnSpacing="20"
                RowSpacing="70">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.Resources>
                    <Style TargetType="Border">
                        <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="CornerRadius" Value="20" />
                        <Setter Property="Height" Value="44" />
                        <Setter Property="Padding" Value="10,0,10,2" />
                    </Style>
                    <Style TargetType="TextBox">
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="FontSize" Value="16" />
                        <Setter Property="VerticalAlignment" Value="Center" />
                    </Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="FontSize" Value="16" />
                        <Setter Property="FontWeight" Value="SemiBold" />
                        <Setter Property="Padding" Value="10,0,0,0" />
                    </Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Spacing" Value="8" />
                    </Style>
                </Grid.Resources>

                <StackPanel Grid.Row="0" Grid.Column="0">
                    <TextBlock FontSize="16" Text="Tên sản phẩm" />
                    <Border>
                        <TextBox PlaceholderText="Nhập tên sản phẩm" />
                    </Border>
                </StackPanel>
                <StackPanel Grid.Row="0" Grid.Column="1">
                    <TextBlock FontSize="16" Text="Id" />
                    <Border>
                        <TextBox PlaceholderText="Nhập Id" />
                    </Border>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="0">
                    <TextBlock FontSize="16" Text="Ngưỡng" />
                    <Border>
                        <TextBox PlaceholderText="Nhập ngưỡng" />
                    </Border>
                </StackPanel>
                <StackPanel Grid.Row="1" Grid.Column="1">
                    <TextBlock FontSize="16" Text="Trạng thái" />
                    <Border>
                        <TextBox PlaceholderText="Nhập trạng thái" />
                    </Border>
                </StackPanel>

                <StackPanel Grid.Row="2" Grid.Column="0">
                    <TextBlock FontSize="16" Text="Số lượng tồn" />
                    <Border>
                        <TextBox PlaceholderText="Nhập số lượng tồn" />
                    </Border>
                </StackPanel>
                <StackPanel Grid.Row="2" Grid.Column="1">
                    <TextBlock FontSize="16" Text="Đơn vị" />
                    <Border>
                        <TextBox PlaceholderText="Nhập đơn vị" />
                    </Border>
                </StackPanel>

                <StackPanel Grid.Row="3" Grid.Column="0">
                    <TextBlock FontSize="16" Text="Hạn sử dụng" />
                    <Border>
                        <CalendarDatePicker
                            x:Name="ExpireDatePicker"
                            HorizontalAlignment="Stretch"
                            Background="Transparent"
                            BorderThickness="0"
                            DateFormat="{}{day.integer}/{month.integer}/{year.full}"
                            FontSize="16"
                            PlaceholderText="Chọn hạn sử dụng" />
                    </Border>
                </StackPanel>
                <StackPanel Grid.Row="3" Grid.Column="1">
                    <TextBlock FontSize="16" Text="Giá" />
                    <Border>
                        <TextBox PlaceholderText="Nhập giá" />
                    </Border>
                </StackPanel>
            </Grid>
            <StackPanel
                Grid.Row="3"
                HorizontalAlignment="Right"
                Orientation="Horizontal"
                Spacing="20">
                <Button
                    x:Name="CancelAddInventoryButton"
                    BorderThickness="0"
                    Click="CloseSheetButton_Click">
                    <TextBlock>
                        <Underline>
                            Hủy
                        </Underline>
                    </TextBlock>
                </Button>
                <Button
                    x:Name="SubmitAddInventoryButton"
                    Padding="40,10,40,10"
                    Background="{StaticResource SecondaryBrush}"
                    CornerRadius="20"
                    Foreground="White">
                    Lưu
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</Page>
